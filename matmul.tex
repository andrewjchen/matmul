%++++++++++++++++++++++++++++++++++++++++
% Don't modify this section unless you know what you're doing!
\documentclass[letterpaper,12pt]{article}
\usepackage{tabularx} % extra features for tabular environment
\usepackage{amsmath}  % improve math presentation
\usepackage{graphicx} % takes care of graphic including machinery
\usepackage[margin=1in,letterpaper]{geometry} % decreases margins
\usepackage{cite} % takes care of citations
\usepackage[final]{hyperref} % adds hyper links inside the generated pdf file
\hypersetup{
	colorlinks=true,       % false: boxed links; true: colored links
	linkcolor=blue,        % color of internal links
	citecolor=blue,        % color of links to bibliography
	filecolor=magenta,     % color of file links
	urlcolor=blue         
}
\usepackage{multirow}
\usepackage{xifthen}
\usepackage{amssymb}
\usepackage{tikz}
\usepackage{float}
\usepackage[european]{circuitikz}
\usepackage{booktabs}

\newcommand*{\vertbar}{\rule[-1ex]{0.5pt}{2.5ex}}
\newcommand*{\horzbar}{\rule[.5ex]{2.5ex}{0.5pt}}
%http://tex.stackexchange.com/questions/12910/how-do-i-typeset-vertical-and-horizontal-lines-inside-a-matrix

\newcommand{\explain}[2]{\underbrace{#1}_{\parbox{\widthof{\ensuremath{#1}}}{\footnotesize\raggedright #2}}}
%http://www.latex-community.org/forum/viewtopic.php?f=45&t=11318



\newcommand{\smashedunderbrace}[2]{\smash{\underbrace{#1}_{#2}}\vphantom{#1}}
%http://tex.stackexchange.com/questions/182749/underbrace-matrix-inside-brackets

\begin{document}

\title{Formulations of Matrix Products from Vector Products}
\author{Andrew Chen\footnote{\copyright\ 2015 Andrew Chen\    All Rights Reserved}}
\date{\vspace{-5ex}}
\maketitle

\section*{Introduction}
The equations for matrix-vector and matrix-matrix products can be formulated and understood in terms of vector-scalar and vector-vector products.

\subsection*{Notation}
To emphasize the connection between the vector and matrix products, we use:
\begin{align*}
A &\in \mathbb{R}^{m \times n} \\
a_j &\in \mathbb{R}^{n}        && j\text{th column vector} \\
a^T_k&\in \mathbb{R}^{1 \times m}     && k\text{th row vector}
\end{align*}

\section*{Formula Table}

%http://tex.stackexchange.com/questions/100509/equations-inside-tabular-environment-no-vertical-spacing
\begin{table}[H]
\centering
\caption{Primitive Operations: Vector \{Scalar, Vector\} Products}
\label{tbl:2_1_1}
$\begin{array}{lr}
\toprule
\text{Formula} &
\multicolumn{1}{c}{\text{Name}}\\
\midrule
\addlinespace
  \begin{aligned}
    u^T k = k u^T
    =
    \begin{bmatrix}
        k u_1 & \dots & k u_n
    \end{bmatrix}
  \end{aligned} &
\text{Scalar row-vector product} \in \mathbb{R}^{1 \times m}
 \\
\addlinespace
\midrule
\addlinespace
  \begin{aligned}
    k v = v k
=
\begin{bmatrix}
    k v_1 \\ \vdots \\ k v_n
\end{bmatrix}
  \end{aligned} &
\text{Scalar col-vector product} \in \mathbb{R}^{n}
 \\
 \addlinespace
\midrule
\addlinespace
\begin{aligned}
u^T v
= 
\begin{bmatrix}
    u_1 & \dots & u_n
\end{bmatrix}
\begin{bmatrix}
    v_1 \\ \vdots \\ v_n
\end{bmatrix}
=
u_1 v_1 + \dots + u_n v_n
\end{aligned} & 
\text{Inner Product} \in \mathbb{R}
 \\
\addlinespace
\midrule
\addlinespace
\begin{aligned}
u v^T
= 
\begin{bmatrix}
    u_1 \\ \vdots \\ u_n
\end{bmatrix}
\begin{bmatrix}
    v_1 & \dots & v_n
\end{bmatrix}
=
\begin{bmatrix}
    (u_1 v_1) & \dots & (u_1 v_n) \\
    \vdots    & \ddots & \vdots \\
    (u_m v_1) & \dots &  (u_m v_n)
\end{bmatrix}
\end{aligned} & 
\text{Outer Product} \in \mathbb{R}^{m \times n}
 \\
\addlinespace
\addlinespace
\bottomrule
\end{array}$
\end{table}

\begin{table}[htb!]
\centering
\caption{Matrix Vector Products}
\label{tbl:matrix_vector_products}
$\begin{array}{lr}
\toprule
\text{Formula} &
\multicolumn{1}{c}{\text{Name}}\\
\midrule
\addlinespace
\begin{aligned}
Ax 
= 
\underbrace{
    \begin{bmatrix}
        \vertbar & & \vertbar\\
        a_1 & \dots & a_n \\
        \vertbar & & \vertbar
    \end{bmatrix}
    \begin{bmatrix}
        x_1 \\
        \vdots \\
        x_n
    \end{bmatrix}\
    }_{u^T v = \text{ inner product}}
= \underbrace{x_1 a_1}_{\substack{\text{column}\\\text{vector}}} + \dots + x_n a_n
\end{aligned} & 
\begin{aligned}
    \text{Linear combination of columns:}\\
    \text{ }\in \mathbb{R}^{n}\\
    \begin{scriptsize}
    \begin{matrix} \text{inner} \\ \text{product}  \end{matrix}
    \rightarrow \begin{matrix} \text{column vector} \\ \text{terms}
    \end{matrix}
    \end{scriptsize}
\end{aligned}
 \\
\addlinespace
\midrule
\addlinespace
\begin{aligned}
y A
=
\underbrace{
    \begin{bmatrix}
        y_1 & \dots & y_m
    \end{bmatrix}
    \begin{bmatrix}
        -a_1^T- \\
        \vdots \\
        -a_m^T-
    \end{bmatrix}
    }_{u^T v = \text{ inner product}}
=
\underbrace{y_1 a_1^T}_{\substack{\text{row}\\\text{vector}}} + \dots + y_m a_m^T
\end{aligned} & 
\begin{aligned}
    \text{Linear combination of rows:}\\
    \text{} \in \mathbb{R}^{1 \times m}\\
    \begin{scriptsize}
    \begin{matrix} \text{inner} \\ \text{product} \end{matrix}
    \rightarrow \begin{matrix} \text{row vector} \\ \text{terms}                    
    \end{matrix}
    \end{scriptsize}
\end{aligned}
 \\
\addlinespace
\midrule
\addlinespace
 \begin{aligned}
Ax
=
\underbrace{
    \begin{bmatrix}
        -a_1^T- \\
        \vdots\\
        -a_m^T-
    \end{bmatrix}
    x
    }_{\vec{v}k = \text{ scalar product}}
=
\begin{bmatrix}
    [-a_1^T-]x \\
    \vdots\\
    \smashedunderbrace{[-a_m^T-]x}{\substack{u^T v = \\ \text{inner product}}}
\end{bmatrix}
=
\begin{bmatrix}
    [-a_1^T-]  \begin{bmatrix} x_1 \\ \vdots \\ x_n \end{bmatrix}
\\
    \vdots\\
    \smashedunderbrace{[-a_m^T-] 
        \begin{bmatrix} x_1 \\ \vdots \\ x_n  \end{bmatrix}
        }{\text{scalar}}
\end{bmatrix}
\\
\\
\end{aligned} & 
\begin{aligned}
    \text{Scalar products with rows:}\\
    \text{} \in \mathbb{R}^{n}\\
    \begin{scriptsize}
    \begin{matrix} \text{scalar} \\ \text{product} \end{matrix}
    \rightarrow \begin{matrix} \text{inner} \\ \text{product} \end{matrix}
    \rightarrow \begin{matrix} \text{scalar} \\ \text{terms} \end{matrix}
    \end{scriptsize}
\end{aligned}
 \\
 \addlinespace
\midrule
\addlinespace
    \begin{aligned}
        yA
        = 
        \smashedunderbrace{
        y
        \begin{bmatrix}
            \vertbar & & \vertbar\\
            a_1 & \dots & a_n \\
            \vertbar & & \vertbar
        \end{bmatrix}
        }{k\vec{v}=\text{scalar product}}
        &=
        \begin{bmatrix}
            \vertbar & & \vertbar\\
            y a_1 & \dots & y a_n \\
            \smashedunderbrace{
            \vertbar 
            }{\substack{u^T v= \\\text{inner}\\\text{product}}}
            & & \vertbar
        \end{bmatrix} 
        \\
        \\
        \\
        &=
        \begin{bmatrix}
            \smashedunderbrace{
            \begin{bmatrix} y_1 \\\vdots \\ y_m \end{bmatrix}^T 
            a_1 }{\text{scalar}}
            & \dots & 
            \begin{bmatrix} y_1 \\\vdots \\ y_m \end{bmatrix}^T 
            a_n
            \\
        \end{bmatrix} 
        \\
        \\    
    \end{aligned}
    & 
    \begin{aligned}
        \text{Scalar products with columns:}\\
        \text{} \in \mathbb{R}^{1 \times m}\\
        \begin{scriptsize}
        \begin{matrix} \text{scalar} \\ \text{product} \end{matrix}
        \rightarrow \begin{matrix} \text{inner} \\ \text{product} \end{matrix}
        \rightarrow \begin{matrix} \text{scalar} \\ \text{terms} \end{matrix}
        \end{scriptsize}
    \end{aligned}\\
\addlinespace
\bottomrule
\end{array}$
\end{table}

\begin{table}[htb!]
\centering
\caption{Matrix-Matrix Products}
\label{tbl:matrix_matrix_products}
$\begin{array}{lr}
\toprule
\text{Formula} &
\multicolumn{1}{c}{\text{Name}}\\
\midrule
\addlinespace
\begin{aligned}\\
AB
=
\underbrace{
    A 
    \begin{bmatrix}
        \vertbar & & \vertbar \\
        b_1 & \dots & b_p \\
        \vertbar & & \vertbar \\
    \end{bmatrix}
    }_{k\vec{v}= \text{ scalar product}}
=
\begin{bmatrix}
    \vertbar & & \vertbar \\
    A b_1 & \dots & A b_p \\
    \smashedunderbrace{\vertbar}{\substack{A\vec{x} = \vec{b}\\\text{matrix-vector} \\\text{product, column}\\\text{ vector}}} & & \vertbar \\
\end{bmatrix}
\\
\\
\end{aligned} & 
\begin{aligned}
    \text{(matrix) Scalar products with columns:}\\
    \begin{scriptsize}
    \begin{matrix} \text{scalar} \\ \text{product} \end{matrix}
    \rightarrow \begin{matrix} \text{matrix-col-vector} \\ \text{product} \end{matrix}
    \rightarrow \begin{matrix} \text{column} \\ \text{vector} \\ \text{terms} \end{matrix}
    \end{scriptsize}
\end{aligned}
 \\
\addlinespace
\midrule
\addlinespace
\begin{aligned}
AB
=
\underbrace{
    \begin{bmatrix}
        -a_1^T-\\
        \vdots\\
        -a_m^T-
    \end{bmatrix}
    B
    }_{\vec{v} k = \text{ scalar product}}
&=
\begin{bmatrix}
    [-a_1^T-] B\\
    \vdots\\
    \smashedunderbrace{[-a_m^T-] B}{\substack{y A = \\ \text{linear combination} \\ \text{of rows}}}
\end{bmatrix}\\
\\
&= 
\begin{bmatrix}
    [-a_1^T-] \begin{bmatrix}
            -b_1- \\
            \vdots \\
            -b_n-
          \end{bmatrix} \\
    \vdots\\
    \smashedunderbrace{
    [-a_m^T-]  \begin{bmatrix}
            -b_1- \\
            \vdots \\
            -b_n-
          \end{bmatrix}
          }{\substack{u^T v = \\ \text{inner product, } \\\text{row vector}}}
\end{bmatrix}
\end{aligned} & 
\begin{aligned}
    \text{
    (matrix) Scalar products with rows:}\\
    \begin{scriptsize}
    \begin{matrix} \text{scalar} \\ \text{product} \end{matrix}
    \rightarrow 
        \begin{matrix} 
            \text{linear} \\ \text{combination}  \\ \text{of rows}
        \end{matrix}
    \rightarrow \begin{matrix} \text{row vector} \\ \text{terms}
    \end{matrix}
    \end{scriptsize}
\end{aligned}
 \\
\addlinespace
\addlinespace \\
\addlinespace
\midrule
\addlinespace
\begin{aligned}
AB
&=
\underbrace{
\begin{bmatrix}
    -a_1^T-\\
    \vdots\\
    -a_m^T-
\end{bmatrix}
\begin{bmatrix}
    \vertbar & & \vertbar \\
    b_1 & \dots & b_p \\
    \vertbar & & \vertbar \\
\end{bmatrix}
}_{u v^T = \text{ outer product}}\\
&=
\begin{bmatrix}
    (a_1^T b_1) & \dots & (a_1^T b_p) \\
    \vdots    & \ddots & \vdots \\
    \smashedunderbrace{
    (a_m^T b_1)}{\substack{u^T v = \\ \text{inner} \\\text{product}}}
     & \dots &  (a_m^T b_p)
\end{bmatrix}
\\
\\
\\
\end{aligned} & 
\begin{aligned}
    \text{Outer Products: Dot products:} \\
    \begin{scriptsize}
    \begin{matrix} \text{outer} \\ \text{product} \end{matrix}
    \rightarrow \begin{matrix} \text{inner} \\ \text{product} \end{matrix}
    \rightarrow \begin{matrix} \text{scalar} \\ \text{terms} \end{matrix}
    \end{scriptsize}
\end{aligned}
 \\
 \addlinespace
\midrule
\addlinespace
\begin{aligned}
    AB 
    =
    \smashedunderbrace{
    \begin{bmatrix}
        \vertbar & & \vertbar\\
        a_1 & \dots & a_n \\
        \vertbar & & \vertbar
    \end{bmatrix}
    \begin{bmatrix}
        -b_1^T- \\
        \vdots \\
        -b_n^T-
    \end{bmatrix}
    }{\substack{u^T v =  \text{inner product}}}
    = 
    \smashedunderbrace{
    a_1 b_1^T
    }{\substack{u v^T = \\\text{outer}\\\text{product}}}
     + \dots + a_n b_n^T
    \\
    \\
\end{aligned}
&
\begin{aligned}
    \text{Linear Combination of Rank-1 Matricies}\\
    \begin{scriptsize}
    \begin{matrix} \text{inner} \\ \text{product} \end{matrix}
    \rightarrow \begin{matrix} \text{outer} \\ \text{product} \end{matrix}
    \rightarrow \begin{matrix} \text{matrix} \\ \text{terms} \end{matrix}
    \end{scriptsize}
\end{aligned}
\\
\addlinespace
\bottomrule
\end{array}$
\end{table}

%\section{Future Work}
%\begin{itemize}
%\item Interpretation of each formulation
%\item Drawing full abreviated picture using dimension counts
%\item Symbolic reasoning for ``composition'' of vector operators
%\item Element-wise formula $(AB)_{ij}$
%\end{itemize}

\end{document}




\end{document}
